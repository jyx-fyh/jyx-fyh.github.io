<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Qt-Widget控件 | 极简</title><meta name="keywords" content="Widget控件概览"><meta name="author" content="极简"><meta name="copyright" content="极简"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="referrer" content="no-referrer"><meta name="description" content="Widget控件概览">
<meta property="og:type" content="article">
<meta property="og:title" content="Qt-Widget控件">
<meta property="og:url" content="http://jyxcpp.netlify.app/2022/08/25/Qt-Widget%E6%8E%A7%E4%BB%B6/index.html">
<meta property="og:site_name" content="极简">
<meta property="og:description" content="Widget控件概览">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://jyxcpp.netlify.app/2022/img/3.jpg">
<meta property="article:published_time" content="2022-08-25T00:37:27.000Z">
<meta property="article:modified_time" content="2023-03-12T11:21:33.090Z">
<meta property="article:author" content="极简">
<meta property="article:tag" content="Qt">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://jyxcpp.netlify.app/2022/img/3.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://jyxcpp.netlify.app/2022/08/25/Qt-Widget%E6%8E%A7%E4%BB%B6/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":300,"position":"top","messagePrev":"本篇文章于","messageNext":"天前发表，某些内容可能已经过时，请注意甄别。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: 极简","link":"链接: ","source":"来源: 极简","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Qt-Widget控件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-12 19:21:33'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- 谷歌的html标记--><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="极简" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">148</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> Comment</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/2022/img/3.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">极简</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> Comment</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Qt-Widget控件</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-25T00:37:27.000Z" title="发表于 2022-08-25 08:37:27">2022-08-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-12T11:21:33.090Z" title="更新于 2023-03-12 19:21:33">2023-03-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Qt/">Qt</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Qt-Widget控件"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>1. QWidget</h1>
<blockquote>
<p>QWidget类是所有窗口类的父类(控件类是也属于窗口类), 并且QWidget类的父类的QObject, 也就意味着所有的窗口类对象只要指定了父对象, 都可以实现内存资源的自动回收。这里给大家介绍一下关于这个类常用的一些API函数。</p>
</blockquote>
<p><img src="/2022/img/image-20201009170432819.png" alt="image-20201009170432819"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">QWidget::<span class="built_in">QWidget</span>(QWidget *parent = <span class="literal">nullptr</span>, Qt::WindowFlags f = Qt::<span class="built_in">WindowFlags</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共成员函数</span></span><br><span class="line"><span class="comment">// 给当前窗口设置父对象</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setParent</span><span class="params">(QWidget *parent)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setParent</span><span class="params">(QWidget *parent, Qt::WindowFlags f)</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的父对象, 没有父对象返回 nullptr</span></span><br><span class="line"><span class="function">QWidget *<span class="title">QWidget::parentWidget</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 窗口位置 -------------</span></span><br><span class="line"><span class="comment">// 得到相对于当前窗口父窗口的几何信息, 边框也被计算在内</span></span><br><span class="line"><span class="function">QRect <span class="title">QWidget::frameGeometry</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 得到相对于当前窗口父窗口的几何信息, 不包括边框</span></span><br><span class="line"><span class="function"><span class="type">const</span> QRect&amp; <span class="title">geometry</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的几何信息(位置和尺寸信息), 不包括边框</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGeometry</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> w, <span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGeometry</span><span class="params">(<span class="type">const</span> QRect &amp;)</span></span>;</span><br><span class="line"><span class="comment">//此属性保存小部件的内部几何形状，不包括任何窗口框架,等于QRect(0,0, width()， height()) </span></span><br><span class="line"><span class="function">QRect <span class="title">rect</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//获取小控件在父控件中的位置</span></span><br><span class="line"><span class="function">QPoint <span class="title">pos</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">// 移动窗口, 重新设置窗口的位置</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">(<span class="type">const</span> QPoint &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 窗口尺寸 -------------</span></span><br><span class="line"><span class="comment">// 获取当前窗口的尺寸信息</span></span><br><span class="line"><span class="function">QSize <span class="title">size</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"><span class="comment">// 重新设置窗口的尺寸信息</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(<span class="type">int</span> w, <span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(<span class="type">const</span> QSize &amp;)</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最大尺寸信息</span></span><br><span class="line"><span class="function">QSize <span class="title">maximumSize</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最小尺寸信息</span></span><br><span class="line"><span class="function">QSize <span class="title">minimumSize</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口固定的尺寸信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedSize</span><span class="params">(<span class="type">const</span> QSize &amp;s)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedSize</span><span class="params">(<span class="type">int</span> w, <span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的最大尺寸信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumSize</span><span class="params">(<span class="type">const</span> QSize &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumSize</span><span class="params">(<span class="type">int</span> maxw, <span class="type">int</span> maxh)</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的最小尺寸信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumSize</span><span class="params">(<span class="type">const</span> QSize &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumSize</span><span class="params">(<span class="type">int</span> minw, <span class="type">int</span> minh)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前窗口的高度    </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">height</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最小高度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">minimumHeight</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最大高度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maximumHeight</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置固定的高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedHeight</span><span class="params">(<span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最大高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumHeight</span><span class="params">(<span class="type">int</span> maxh)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最小高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumHeight</span><span class="params">(<span class="type">int</span> minh)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前窗口的宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">width</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最小宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">minimumWidth</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最大宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maximumWidth</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置固定宽度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedWidth</span><span class="params">(<span class="type">int</span> w)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最大宽度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumWidth</span><span class="params">(<span class="type">int</span> maxw)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最小宽度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumWidth</span><span class="params">(<span class="type">int</span> minw)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 窗口图标 -------------</span></span><br><span class="line"><span class="comment">// 得到当前窗口的图标</span></span><br><span class="line"><span class="function">QIcon <span class="title">windowIcon</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 构造图标对象, 参数为图片的路径</span></span><br><span class="line">QIcon::<span class="built_in">QIcon</span>(<span class="type">const</span> QString &amp;fileName);</span><br><span class="line"><span class="comment">// 设置当前窗口的图标</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowIcon</span><span class="params">(<span class="type">const</span> QIcon &amp;icon)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*--Slots--*/</span></span><br><span class="line"><span class="comment">//------------- 窗口标题 -------------</span></span><br><span class="line"><span class="comment">// 得到当前窗口的标题</span></span><br><span class="line"><span class="function">QString <span class="title">windowTitle</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的标题</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowTitle</span><span class="params">(<span class="type">const</span> QString &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowModified</span><span class="params">(<span class="type">bool</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 判断窗口是否可用</span></span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEnabled</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置窗口是否可用, 不可用窗口无法接收和处理窗口事件</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setEnabled</span><span class="params">(<span class="type">bool</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 窗口显示 -------------</span></span><br><span class="line"><span class="comment">// 关闭当前窗口</span></span><br><span class="line">[slot] <span class="function"><span class="type">bool</span> <span class="title">QWidget::close</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 隐藏当前窗口</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::hide</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 显示当前创建以及其子窗口</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::show</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//设置窗口是否可见</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">setVisible</span><span class="params">(<span class="type">bool</span> visible)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 全屏显示当前窗口, 只对windows有效</span></span></span><br><span class="line"><span class="function">[slot] <span class="type">void</span> <span class="title">QWidget::showFullScreen</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 窗口最大化显示, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showMaximized</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 窗口最小化显示, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showMinimized</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 将窗口回复为最大化/最小化之前的状态, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showNormal</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 信号 -------------</span></span><br><span class="line"><span class="comment">// QWidget::setContextMenuPolicy(Qt::ContextMenuPolicy policy);</span></span><br><span class="line"><span class="comment">// 窗口的右键菜单策略 contextMenuPolicy() 参数设置为 Qt::CustomContextMenu, 按下鼠标右键发射该信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::customContextMenuRequested</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span></span>;</span><br><span class="line"><span class="comment">// 窗口图标发生变化, 发射此信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::windowIconChanged</span><span class="params">(<span class="type">const</span> QIcon &amp;icon)</span></span>;</span><br><span class="line"><span class="comment">// 窗口标题发生变化, 发射此信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::windowTitleChanged</span><span class="params">(<span class="type">const</span> QString &amp;title)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="设置鼠标样式">设置鼠标样式</h2>
<h3 id="Qcursor">Qcursor</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取鼠标的全局坐标</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QPoint <span class="title">pos</span><span class="params">()</span></span></span><br><span class="line"><span class="function">[<span class="type">static</span>] QPoint <span class="title">pos</span><span class="params">(<span class="type">const</span> QScreen *screen)</span></span></span><br><span class="line"><span class="function"><span class="comment">//将鼠标移动到全局的指定坐标    </span></span></span><br><span class="line"><span class="function">[<span class="type">static</span>] <span class="type">void</span> <span class="title">setPos</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function">[<span class="type">static</span>] <span class="type">void</span> <span class="title">setPos</span><span class="params">(QScreen *screen, <span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function">[<span class="type">static</span>] <span class="type">void</span> <span class="title">setPos</span><span class="params">(<span class="type">const</span> QPoint &amp;p)</span></span></span><br><span class="line"><span class="function">[<span class="type">static</span>] <span class="type">void</span> <span class="title">setPos</span><span class="params">(QScreen *screen, <span class="type">const</span> QPoint &amp;p)</span></span></span><br><span class="line"><span class="function"><span class="comment">//QScreen在多屏幕的时候可用    </span></span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.iconfont.cn/">iconfont图标下载网站</a></p>
<ul>
<li>以下代码可以通过点击按钮切换并查看所有鼠标的(内置)形状</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">QPushButton*btn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;切换鼠标形状&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line"><span class="built_in">connect</span>(btn,&amp;QPushButton::clicked,<span class="keyword">this</span>,[=]()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">setCursor</span>(Qt::<span class="built_in">CursorShape</span>(i));</span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;切换成功&quot;</span>&lt;&lt;Qt::<span class="built_in">CursorShape</span>(i);</span><br><span class="line">    i = (i+<span class="number">1</span>)%<span class="number">25</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>除了内置形状之外，还可以自定义鼠标形状</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">QPixmap* cursorPixmaps[<span class="number">2</span>]=&#123;<span class="keyword">new</span> <span class="built_in">QPixmap</span>(<span class="string">&quot;://images/cursor_one.png&quot;</span>),</span><br><span class="line">                              <span class="keyword">new</span> <span class="built_in">QPixmap</span>(<span class="string">&quot;://images/cursor_two.png&quot;</span>)&#125;;</span><br><span class="line">QPushButton*btn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;切换鼠标样式&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line"><span class="built_in">connect</span>(btn,&amp;QPushButton::clicked,<span class="keyword">this</span>,[=]()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">setCursor</span>(<span class="built_in">QCursor</span>(*cursorPixmaps[i]));</span><br><span class="line">    i = (i+<span class="number">1</span>)%<span class="number">2</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="setWhatsThis">setWhatsThis</h2>
<p>setToolTip用来设置提示信息，那么setWhatsThis是用来干嘛的呢？顾名思义就是用来说明这是啥玩意的</p>
<ul>
<li>
<p>先创建三个按钮</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">QPushButton*btn1 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;open&quot;</span>,<span class="keyword">this</span>);  </span><br><span class="line">QPushButton*btn2 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;new&quot;</span>,<span class="keyword">this</span>);   </span><br><span class="line">QPushButton*btn3 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;look&quot;</span>,<span class="keyword">this</span>);  </span><br><span class="line">btn2-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">0</span>);                                </span><br><span class="line">btn3-&gt;<span class="built_in">move</span>(<span class="number">200</span>,<span class="number">0</span>);                                </span><br><span class="line">                                                  </span><br><span class="line">btn1-&gt;<span class="built_in">setToolTip</span>(<span class="string">&quot;打开文件&quot;</span>);                         </span><br><span class="line">btn1-&gt;<span class="built_in">setWhatsThis</span>(<span class="string">&quot;open a new file&quot;</span>);            </span><br><span class="line">                                                  </span><br><span class="line">btn2-&gt;<span class="built_in">setToolTip</span>(<span class="string">&quot;新建文件&quot;</span>);                         </span><br><span class="line">btn2-&gt;<span class="built_in">setWhatsThis</span>(<span class="string">&quot;create a new file&quot;</span>);          </span><br><span class="line">                                                  </span><br><span class="line">btn3-&gt;<span class="built_in">setToolTip</span>(<span class="string">&quot;查看&quot;</span>);                           </span><br><span class="line">btn3-&gt;<span class="built_in">setWhatsThis</span>(<span class="string">&quot;查看其他按钮的详细信息&quot;</span>);                </span><br><span class="line">                                                  </span><br><span class="line"><span class="built_in">connect</span>(btn3,&amp;QPushButton::clicked,<span class="keyword">this</span>,[=]()     </span><br><span class="line">&#123;                                                 </span><br><span class="line">    QWhatsThis::<span class="built_in">enterWhatsThisMode</span>();                </span><br><span class="line">&#125;);                                               </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>运行程序后按Shift + F1会出现当前获得焦点的widget的whatsThis信息</p>
</li>
<li>
<p>调用QWhatsThis的静态函数enterWhatsThisMode进入whatsThis模式，此时当鼠标移动到设置了whatsThis的widget上光标会出现一个问号，再点击则会出现whatsThis的窗口。</p>
</li>
</ul>
<h2 id="设置窗口图标">设置窗口图标</h2>
<ul>
<li>修改窗口和任务栏显示的图标</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>-&gt;<span class="built_in">setWindowIcon</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;://images/snowBall.png&quot;</span>));</span><br></pre></td></tr></table></figure>
<h2 id="设置应用程序图标">设置应用程序图标</h2>
<p>简单三步，搞定~</p>
<ul>
<li>
<p>1，创建一个图标格式(ico)的文件，<code>可以将一个普通的图片转成.ico格式的图标文件</code></p>
<p><a target="_blank" rel="noopener" href="https://convertio.co/zh/">图片格式在线转换</a></p>
</li>
<li>
<p>2，将转换好的ico文件放到源文件所在目录，即和.pro文件同级目录</p>
</li>
<li>
<p>3，在.pro项目文件中添加如下代码<code>zay.ico 即图标名</code></p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RC_ICONS += zay.ico</span><br></pre></td></tr></table></figure>
<h2 id="QWidget槽函数">QWidget槽函数</h2>
<p><strong>show,hide,setVisible,setHidden,close 小结</strong></p>
<ul>
<li>
<p>0，在Qt中如果一定要自己释放对象，官方推荐使用<code>[slot] void QObject::deleteLater()</code>来释放对象</p>
</li>
<li>
<p>1，<code>[slot] void setVisible(bool visible)</code> 设置Widget可见或不可见</p>
</li>
<li>
<p>2，<code>slot] void QWidget::setHidden(bool *hidden*)</code> 1号的马甲</p>
</li>
<li>
<p>3，<code>[slot] void QWidget::show()</code> 1号的马甲</p>
</li>
<li>
<p>4，<code>[slot] void QWidget::hide()</code>  1号的马甲</p>
</li>
<li>
<p>5，<code>[slot] bool QWidget::close()</code> <strong>看情况调用4号或者0号(该部件是否有父部件)</strong></p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">呵呵，<span class="built_in">show</span>()、<span class="built_in">hide</span>()、<span class="built_in">setVisible</span>()、<span class="built_in">setHidden</span>() 这<span class="number">4</span>个函数让人看得眼花缭乱。怎么办？</span><br><span class="line">看看代码吧：</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">setVisible</span><span class="params">(<span class="type">bool</span> visible)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">setHidden</span><span class="params">(<span class="type">bool</span> hidden)</span> </span>&#123; <span class="built_in">setVisible</span>(!hidden); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123; <span class="built_in">setVisible</span>(<span class="literal">true</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">hide</span><span class="params">()</span> </span>&#123; <span class="built_in">setVisible</span>(<span class="literal">false</span>); &#125;</span><br></pre></td></tr></table></figure>
<p>代码很清楚：这四个东西之中，只有 setVisible 是独立的，其他三个都是它的马甲！<br>
setVisible 的作用是什么呢？顾名思义，使得一个Widget可见或不可见。<br>
<strong>要点</strong>：<font color='orange'>不可见，是Widget不在界面上显示，但不代表对象被析构！</font></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//[1]创建关闭自己的按钮</span></span><br><span class="line">QPushButton* closeBtn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;closeSelf&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line"><span class="built_in">connect</span>(closeBtn,&amp;QPushButton::clicked,<span class="keyword">this</span>,&amp;Widget::close);</span><br><span class="line"><span class="comment">//点击右上角关闭按钮会销毁窗口</span></span><br><span class="line"><span class="built_in">connect</span>(<span class="keyword">this</span>,&amp;QObject::destroyed,<span class="keyword">this</span>,[]()&#123;<span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;this destroyed&quot;</span>;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//[2]创建子窗口</span></span><br><span class="line">QWidget* subWidget = <span class="keyword">new</span> QWidget;</span><br><span class="line">subWidget-&gt;<span class="built_in">setWindowTitle</span>(<span class="string">&quot;subWidget&quot;</span>);</span><br><span class="line">subWidget-&gt;<span class="built_in">show</span>();</span><br><span class="line"><span class="comment">//subWidget-&gt;setAttribute(Qt::WidgetAttribute::WA_DeleteOnClose);   //点击关闭按钮时销毁窗口        </span></span><br><span class="line"><span class="built_in">connect</span>(subWidget,&amp;QWidget::destroyed,<span class="keyword">this</span>,[=]()&#123;<span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;subWidget destroyed&quot;</span>;&#125;);</span><br><span class="line"><span class="comment">//[3]创建关闭子窗口的按钮</span></span><br><span class="line">QPushButton*closeSubWidgetBtn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;closeSubWidget&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line">closeSubWidgetBtn-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">connect</span>(closeSubWidgetBtn,&amp;QPushButton::clicked,subWidget,[=]()&#123;</span><br><span class="line">    subWidget-&gt;<span class="built_in">close</span>();</span><br><span class="line">    subWidget-&gt;<span class="built_in">deleteLater</span>();   <span class="comment">//推荐这样销毁对象</span></span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt;subWidget;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//[4]创建显示子窗口的按钮</span></span><br><span class="line">QPushButton*showSubWidgetBtn = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;showSubWidget&quot;</span>,<span class="keyword">this</span>);</span><br><span class="line">showSubWidgetBtn-&gt;<span class="built_in">move</span>(<span class="number">200</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">connect</span>(showSubWidgetBtn,&amp;QPushButton::clicked,subWidget,&amp;QWidget::show);             </span><br></pre></td></tr></table></figure>
<h2 id="坐标转换">坐标转换</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QPoint <span class="title">mapFrom</span><span class="params">(<span class="type">const</span> QWidget *parent, <span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QPoint <span class="title">mapFromGlobal</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QPoint <span class="title">mapFromParent</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QPoint <span class="title">mapTo</span><span class="params">(<span class="type">const</span> QWidget *parent, <span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QPoint <span class="title">mapToGlobal</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">QPoint <span class="title">mapToParent</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>这几个函数都是转换相对坐标系用的. <strong>用另一个坐标系统的坐标值, 来表达当前坐标系统中某个坐标所指向的某个点,</strong></p>
<p>记住: 一定要先确<strong>两个坐标系统</strong>再确定<strong>一个点</strong></p>
</li>
<li>
<p><strong>相对坐标</strong>：获取自己相对于父控件的位置 QWidget::pos()</p>
</li>
<li>
<p><strong>绝对坐标</strong>：将当前控件的相对位置转换为屏幕绝对位置 QWidget::mapToGlobal()</p>
</li>
<li>
<p><strong>绝对坐标转为相对坐标</strong>：将绝对位置对应到控件的相对位置 QWidget::mapFromGlobal()</p>
</li>
</ul>
<h2 id="设置窗口标志">设置窗口标志</h2>
<ul>
<li>用Qt写一个窗口，如果继承QDialog，那窗口就只有关闭按钮，如果继承QWidget，那么就有关闭，最大化，最小化三个按钮，怎样才能让关闭按钮可用，而最大化和最小化按钮不可用呢？</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//仅仅显示关闭按钮，添加一个帮助按钮?</span></span><br><span class="line"><span class="keyword">this</span>-&gt;<span class="built_in">setWindowFlags</span>(Qt::WindowType::WindowCloseButtonHint | Qt::WindowContextHelpButtonHint);</span><br><span class="line"><span class="comment">//从窗口标志中移除帮助按钮标志</span></span><br><span class="line"><span class="keyword">this</span>-&gt;<span class="built_in">setWindowFlags</span>(<span class="built_in">windowFlags</span>() &amp; ~Qt::WindowContextHelpButtonHint);</span><br><span class="line"><span class="comment">//移除标志或单纯添加一个标志，可以用一下简单的函数	true为设置，false为移除</span></span><br><span class="line"><span class="keyword">this</span>-&gt;<span class="built_in">setWindowFlag</span>(Qt::WindowContextHelpButtonHint,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>更多标志详见<a href="#%E9%99%84%E5%BD%95%E4%B8%80">附录一 </a></li>
</ul>
<h2 id="设置窗口状态">设置窗口状态</h2>
<ul>
<li>将窗口状态设置为windowState。 窗口状态是<a href="#%E9%99%84%E5%BD%95%E4%BA%8C">附录二</a>中状态的组合。</li>
<li>如果窗口不可见(即isVisible()返回false)，窗口状态将在调用show()时生效。 对于可见窗口，更改是立即的。 例如，要在全屏模式和普通模式之间切换，请使用以下代码:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w-&gt;<span class="built_in">setWindowState</span>(w-&gt;<span class="built_in">windowState</span>() ^ Qt::WindowFullScreen);</span><br></pre></td></tr></table></figure>
<ul>
<li>为了恢复和激活最小化的窗口(同时保持其最大化和/或全屏状态)，使用以下方法:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w-&gt;<span class="built_in">setWindowState</span>((w-&gt;<span class="built_in">windowState</span>() &amp; ~Qt::WindowMinimized) | Qt::WindowActive);</span><br></pre></td></tr></table></figure>
<ul>
<li>调用这个函数将隐藏小部件。 必须调用show()使小部件再次可见，在某些窗口系统中，Qt::WindowActive不是立即的，在某些情况下可能会被忽略。</li>
</ul>
<h2 id="设置属性">设置属性</h2>
<ul>
<li>setAttribute用来设置小部件的属性，testAttribute查看是否设置了某种属性。</li>
</ul>
<p><strong>常用属性</strong></p>
<table>
<thead>
<tr>
<th>枚举</th>
<th>值(十进制)</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt::WA_AcceptDrops</td>
<td>78</td>
<td>允许来自拖放操作的数据被拖放到小部件上(参见QWidget::setAcceptDrops())</td>
</tr>
<tr>
<td>Qt::WA_AlwaysShowToolTips</td>
<td>84</td>
<td>为非活动窗口启用工具提示</td>
</tr>
<tr>
<td>Qt::WA_CustomWhatsThis</td>
<td>47</td>
<td>表示小部件希望在“这是什么?”模式下继续正常运行。 这是由小部件的作者设置的。</td>
</tr>
<tr>
<td>Qt::WA_DeleteOnClose</td>
<td>55</td>
<td>使Qt在小部件接受关闭事件时删除该小部件</td>
</tr>
<tr>
<td>Qt::WA_MouseTracking</td>
<td>2</td>
<td>指示小部件启用了鼠标跟踪。 参见QWidget:: mouseTracking</td>
</tr>
<tr>
<td>Qt::WA_TranslucentBackground</td>
<td>120</td>
<td>指示小部件应该有一个半透明的背景，也就是说，小部件的任何非透明区域都将是半透明的，因为小部件将有一个alpha通道。 设置此标志将导致设置WA_NoSystemBackground。 在Windows上，小部件还需要设置Qt:: framesswindowhint窗口标志。 该标志由小部件的作者设置或清除。</td>
</tr>
</tbody>
</table>
<h2 id="发布程序">发布程序</h2>
<p>Qt 官方开发环境使用的动态链接库方式，在发布生成的exe程序时，需要复制一大堆 dll，如果自己去复制dll，很可能丢三落四，导致exe在别的电脑里无法正常运行。因此 Qt 官方开发环境里自带了一个工具：windeployqt.exe(这个文件在Qt安装目录的bin文件下可以找到)</p>
<p>不同的编译器和版本需要使用不同的windeployqt版本打包</p>
<p>以官方 Qt 5.14.2+MinGW32 开发环境为例：</p>
<ul>
<li>1，通过Qt命令行运行windeployqt工具，开始菜单-&gt;Qt 5.14.2-&gt;5.4-&gt;MinGW 4.9 (32-bit)-&gt;Qt 5.14.2 (MinGW 7.3.0 32-bit)</li>
<li>把需要打包的Qt可执行程序拷贝到一个单独的文件夹里面，然后再把命令行工作目录切换到该文件夹</li>
<li>最后执行命令<code>windeployqt maye.exe</code></li>
</ul>
<h1>2. 资源文件 .qrc</h1>
<blockquote>
<p>需要我们给窗口设置图标</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建图标对象</span></span><br><span class="line">QIcon::<span class="built_in">QIcon</span>(<span class="type">const</span> QString &amp;fileName)</span><br><span class="line"><span class="comment">// QWidget类的 公共成员函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowIcon</span><span class="params">(<span class="type">const</span> QIcon &amp;icon)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 给窗口设置图标</span></span></span><br><span class="line"><span class="function"><span class="comment">// 弊端: 发布的exe 必须要加载 d:\\pic\\1.ico 如果对应的目录中么有图片, 图标就无法被加载</span></span></span><br><span class="line"><span class="function"><span class="comment">//			发布exe 需要额外发布图片, 将其部署到某个目录中</span></span></span><br><span class="line"><span class="function"><span class="title">setWindowIcon</span><span class="params">(QIcon(<span class="string">&quot;d:\\pic\\1.ico&quot;</span>))</span></span>;</span><br></pre></td></tr></table></figure>
<p>使用资源文件解决上述的弊端:</p>
<blockquote>
<p>优势:</p>
<ol>
<li>将图片资源放到资源文件</li>
<li>当程序编译的时候, 资源文件中的图片会被转换为二进制, 打包到exe中</li>
<li>直接发布exe就可以, 不需要额外提供图片资源了</li>
</ol>
</blockquote>
<p>资源文件的创建</p>
<p><img src="/2022/img/image-20200412103034187-1601290192153.png" alt="image-20200412103034187"></p>
<p><img src="/2022/img/image-20200412103106280-1601290192156.png" alt="image-20200412103106280"></p>
<p><img src="/2022/img/image-20200412103135989-1601290192157.png" alt="image-20200412103135989"></p>
<p><img src="/2022/img/image-20200412103213774-1601290192157.png" alt="image-20200412103213774"></p>
<ul>
<li>
<p>资源文件的使用</p>
<ul>
<li>打开资源文件</li>
</ul>
<p><img src="/2022/img/image-20200412103300715-1601290192157.png" alt="image-20200412103300715"></p>
<ul>
<li>添加前缀</li>
</ul>
<p><img src="/2022/img/image-20200412103405364-1601290192158.png" alt="image-20200412103405364"></p>
<ul>
<li>
<p>添加文件</p>
<p><img src="/2022/img/image-20200412103458462-1601290192158.png" alt="image-20200412103458462"></p>
<ul>
<li>
<p>弹出以文件选择对话框, 选择资源文件</p>
<ul>
<li>资源文件放到什么地方?
<ul>
<li>放到和 项目文件  .pro 同一级目录或者更深的目录中</li>
<li><code>错误的做法: 将资源文件放到 .pro文件的上级目录, 这样资源文件无法被加载到</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>资源文件中添加的图片资源</p>
<p><img src="/2022/img/image-20200412104000877-1601290192158.png" alt="image-20200412104000877"></p>
</li>
</ul>
</li>
<li>
<p>如何在程序中使用资源文件中的图片</p>
<p><img src="/2022/img/image-20200412104156739-1601290192158.png" alt="image-20200412104156739"></p>
</li>
</ul>
</li>
</ul>
<h1>附录一</h1>
<ul>
<li>此枚举类型用于为小部件指定各种窗口系统属性。 它们相当不寻常，但在少数情况下是必要的。 其中一些标志取决于底层窗口管理器是否支持它们。</li>
</ul>
<table>
<thead>
<tr>
<th>枚举</th>
<th>值(十六进制)</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt::Widget</td>
<td>0x00000000</td>
<td>这是QWidget的默认类型。 这种类型的小部件如果有父部件，则为子部件，如果没有父部件，则为独立窗口。</td>
</tr>
<tr>
<td>Qt::Window</td>
<td>0x00000001</td>
<td>指示小部件是一个窗口，通常带有窗口系统框架和标题栏，而不管小部件是否有父窗口。</td>
</tr>
<tr>
<td>Qt::Dialog</td>
<td>0x00000002| Window</td>
<td>指示小部件是一个窗口，应该装饰为一个对话框(即，通常在标题栏中没有最大化或最小化按钮)。</td>
</tr>
<tr>
<td>Qt::Sheet</td>
<td>0x00000004| Window</td>
<td>指示窗口是macOS上的工作表。 由于使用工作表意味着窗口模式，推荐的方法是使用QWidget::setWindowModality()，或QDialog::open()</td>
</tr>
<tr>
<td>Qt::Drawer</td>
<td>Sheet | Dialog</td>
<td>指示小部件是macOS上的一个抽屉</td>
</tr>
<tr>
<td>Qt::Popup</td>
<td>0x00000008| Window</td>
<td>指示小部件是弹出式顶级窗口，即它是模态窗口，但具有适合于弹出式菜单的窗口系统框架。</td>
</tr>
<tr>
<td>Qt::Tool</td>
<td>Popup | Dialog</td>
<td>指示小部件是工具窗口。 工具窗口通常是一个小窗口，比通常的标题栏和装饰更小，通常用于工具按钮集合</td>
</tr>
<tr>
<td>Qt::ToolTip</td>
<td>Popup | Sheet</td>
<td>指示小部件是一个工具提示。 这在内部用于实现工具提示</td>
</tr>
<tr>
<td>Qt::SplashScreen</td>
<td>ToolTip | Dialog</td>
<td>表示该窗口为启动画面。 这是QSplashScreen的默认类型</td>
</tr>
<tr>
<td>Qt::Desktop</td>
<td>0x00000010| Window</td>
<td>指示此小部件是桌面。 这是QDesktopWidget(此类已经过时)的类型</td>
</tr>
<tr>
<td>Qt::SubWindow</td>
<td>0x00000012</td>
<td>指示此小部件是子窗口，例如QMdiSubWindow小部件</td>
</tr>
<tr>
<td>Qt::ForeignWindow</td>
<td>0x00000020| Window</td>
<td>表示此窗口对象是一个句柄，表示由另一个进程或手动使用本机代码创建的本机平台窗口。</td>
</tr>
<tr>
<td>Qt::CoverWindow</td>
<td>0x00000040| Window</td>
<td>指示该窗口表示覆盖窗口，该窗口在某些平台上最小化应用程序时显示。</td>
</tr>
</tbody>
</table>
<ul>
<li>窗口提示可以有多个(不一定会生效，看平台是否支持)</li>
</ul>
<table>
<thead>
<tr>
<th>枚举</th>
<th>值(十六进制)</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt::FramelessWindowHint</td>
<td>0x00000800</td>
<td>产生一个无边框的窗口。 用户不能通过窗口系统移动或调整无边框窗口的大小</td>
</tr>
<tr>
<td>Qt::NoDropShadowWindowHint</td>
<td>0x40000000</td>
<td>去掉窗口阴影</td>
</tr>
<tr>
<td>Qt::CustomizeWindowHint</td>
<td>0x02000000</td>
<td>关闭默认的窗口标题提示</td>
</tr>
<tr>
<td>Qt::WindowTitleHint</td>
<td>0x00001000</td>
<td>给窗口一个标题栏</td>
</tr>
<tr>
<td>Qt::WindowSystemMenuHint</td>
<td>0x00002000</td>
<td>添加一个窗口系统菜单，可能还有一个关闭按钮(例如在Mac上)。 如果你需要隐藏或显示关闭按钮，使用WindowCloseButtonHint更便于移植。</td>
</tr>
<tr>
<td>Qt::WindowMinimizeButtonHint</td>
<td>0x00004000</td>
<td>添加一个最小化按钮</td>
</tr>
<tr>
<td>Qt::WindowMaximizeButtonHint</td>
<td>0x00008000</td>
<td>添加一个最大化按钮</td>
</tr>
<tr>
<td>Qt::WindowMinMaxButtonsHint</td>
<td>WindowMinimizeButtonHint |WindowMaximizeButtonHint</td>
<td>添加最小化和最大化按钮</td>
</tr>
<tr>
<td>Qt::WindowCloseButtonHint</td>
<td>0x08000000</td>
<td>添加一个关闭按钮</td>
</tr>
<tr>
<td>Qt::WindowContextHelpButtonHint</td>
<td>0x00010000</td>
<td>向对话框添加上下文帮助按钮</td>
</tr>
<tr>
<td>Qt::WindowStaysOnTopHint</td>
<td>0x00040000</td>
<td>通知窗口系统该窗口应该位于所有其他窗口的顶部</td>
</tr>
<tr>
<td>Qt::WindowStaysOnBottomHint</td>
<td>0x04000000</td>
<td>通知窗口系统该窗口应位于所有其他窗口的底部</td>
</tr>
</tbody>
</table>
<h1>附录二</h1>
<ul>
<li>窗口状态 <code>Qt::WindowState</code></li>
</ul>
<table>
<thead>
<tr>
<th>枚举</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qt::WindowNoState</td>
<td>0x00000000</td>
<td>窗口没有状态设置(正常状态)</td>
</tr>
<tr>
<td>Qt::WindowMinimized</td>
<td>0x00000001</td>
<td>窗口被最小化(即图标化)</td>
</tr>
<tr>
<td>Qt::WindowMaximized</td>
<td>0x00000002</td>
<td>窗户周围有一个框架，使其最大化</td>
</tr>
<tr>
<td>Qt::WindowFullScreen</td>
<td>0x00000004</td>
<td>窗口填充了整个屏幕，周围没有任何边框</td>
</tr>
<tr>
<td>Qt::WindowActive</td>
<td>0x00000008</td>
<td>该窗口是活动窗口，即它有键盘焦点</td>
</tr>
</tbody>
</table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://jyxcpp.netlify.app">极简</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://jyxcpp.netlify.app/2022/08/25/Qt-Widget%E6%8E%A7%E4%BB%B6/">http://jyxcpp.netlify.app/2022/08/25/Qt-Widget%E6%8E%A7%E4%BB%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://jyxcpp.netlify.app" target="_blank">极简</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Qt/">Qt</a></div><div class="post_share"><div class="social-share" data-image="/2022/img/3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/08/26/Qt-%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6/"><img class="prev-cover" src="/2022/img/5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Qt-常用控件</div></div></a></div><div class="next-post pull-right"><a href="/2022/08/23/Qt-%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6/"><img class="next-cover" src="/2022/img/2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Qt-内存回收</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/08/26/Qt-QMainWindown/" title="Qt-QMainWindown"><img class="cover" src="/2022/img/6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-26</div><div class="title">Qt-QMainWindown</div></div></a></div><div><a href="/2022/08/23/Qt-%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD%E6%9C%BA%E5%88%B6/" title="Qt-信号与槽机制"><img class="cover" src="/2022/img/1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-23</div><div class="title">Qt-信号与槽机制</div></div></a></div><div><a href="/2022/08/23/Qt-%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6/" title="Qt-内存回收"><img class="cover" src="/2022/img/2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-23</div><div class="title">Qt-内存回收</div></div></a></div><div><a href="/2022/08/26/Qt-%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6/" title="Qt-常用控件"><img class="cover" src="/2022/img/5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-26</div><div class="title">Qt-常用控件</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">1. QWidget</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">设置鼠标样式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Qcursor"><span class="toc-number">1.1.1.</span> <span class="toc-text">Qcursor</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setWhatsThis"><span class="toc-number">1.2.</span> <span class="toc-text">setWhatsThis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%AA%97%E5%8F%A3%E5%9B%BE%E6%A0%87"><span class="toc-number">1.3.</span> <span class="toc-text">设置窗口图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%9B%BE%E6%A0%87"><span class="toc-number">1.4.</span> <span class="toc-text">设置应用程序图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QWidget%E6%A7%BD%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.</span> <span class="toc-text">QWidget槽函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.6.</span> <span class="toc-text">坐标转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%AA%97%E5%8F%A3%E6%A0%87%E5%BF%97"><span class="toc-number">1.7.</span> <span class="toc-text">设置窗口标志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%AA%97%E5%8F%A3%E7%8A%B6%E6%80%81"><span class="toc-number">1.8.</span> <span class="toc-text">设置窗口状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7"><span class="toc-number">1.9.</span> <span class="toc-text">设置属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.10.</span> <span class="toc-text">发布程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">2. 资源文件 .qrc</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">附录一</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">附录二</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background: linear-gradient(to right bottom, rgb(0, 255, 240), rgb(92, 159, 247) 40%, rgb(211, 34, 255) 80%);"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 极简</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi,welcome to my blog.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'ppICFLHVi3M0o7XY5Cntsens-gzGzoHsz',
      appKey: '6qgu3NQ0HfB3CGG9ruP46nAm',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>